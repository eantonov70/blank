import{generateNonce as A,AuthClient as T}from"@walletconnect/auth-client";import{WalletConnectModal as q}from"@walletconnect/modal";var x=Object.defineProperty,D=Object.defineProperties,N=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,g=(t,e,a)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,_=(t,e)=>{for(var a in e||(e={}))R.call(e,a)&&g(t,a,e[a]);if(I)for(var a of I(e))V.call(e,a)&&g(t,a,e[a]);return t},z=(t,e)=>D(t,N(e)),v=(t,e,a)=>{if(!e.has(t))throw TypeError("Cannot "+a)},i=(t,e,a)=>(v(t,e,"read from private field"),a?a.call(t):e.get(t)),r=(t,e,a)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,a)},u=(t,e,a,h)=>(v(t,e,"write to private field"),h?h.call(t,a):e.set(t,a),a),d=(t,e,a)=>(v(t,e,"access private method"),a),n,s,l,c,w,P,p,m,f,k;class G{constructor(e){r(this,w),r(this,p),r(this,f),r(this,n,void 0),r(this,s,void 0),r(this,l,void 0),r(this,c,void 0),u(this,n,e),u(this,s,d(this,w,P).call(this)),d(this,p,m).call(this)}async signIn(e){const{chainId:a,statement:h,aud:b,domain:y}=e,M=a??"eip155:1",C=b??location.href,E=y??location.host;return new Promise(async(S,j)=>{i(this,c)||await d(this,p,m).call(this);const O=i(this,s).subscribeModal(o=>{o.open||(O(),j(new Error("Modal closed")))});i(this,c).once("auth_response",({params:o})=>{O(),i(this,s).closeModal(),o.result?S({valid:!0,address:o.result.p.iss.split(":")[4],cacao:o.result}):j(new Error(o.message))});const{uri:W}=await i(this,c).request({aud:C,domain:E,chainId:M,type:"eip4361",nonce:A(),statement:h});W&&await i(this,s).openModal({uri:W,chains:[M]})})}}n=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,w=new WeakSet,P=function(){const{modalOptions:t,projectId:e}=i(this,n);return new q(z(_({},t),{enableAuthMode:!0,projectId:e}))},p=new WeakSet,m=async function(){return!i(this,l)&&typeof window<"u"&&u(this,l,d(this,f,k).call(this)),i(this,l)},f=new WeakSet,k=async function(){u(this,c,await T.init({metadata:i(this,n).metadata,projectId:i(this,n).projectId}))};export{G as WalletConnectModalAuth};
//# sourceMappingURL=index.js.map
